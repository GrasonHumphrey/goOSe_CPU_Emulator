# Text to code converter

def @a 1
def @b 2
def @c 3
def @d 4
def @e 5
def @f 6
def @g 7
def @h 8
def @i 9
def @j A
def @k B
def @l C
def @m D
def @n E
def @o F
def @p 10
def @q 11
def @r 12
def @s 13
def @t 14
def @u 15
def @v 16
def @w 17
def @x 18
def @y 19
def @z 1A
def @_ 20

# Location of next character to draw
def cursor1 $00
def cursor2 $01

set cursor1 00
set cursor2 20

# Location of next text to be drawn to the screen
def text1 $02
def text2 $03

def helloworld1 00
def helloworld2 0A
set *A00 @h
set *A01 @e
set *A02 @l
set *A03 @l
set *A04 @o
set *A05 @_
set *A06 @w
set *A07 @o
set *A08 @r
set *A09 @l
set *A0A @d
set *A0B 00

def name1 0C
def name2 0A
set *A0C @g
set *A0D @r
set *A0E @a
set *A0F @s
set *A10 @o
set *A11 @n
set *A12 00


mov ar helloworld1
mov text1 ar
mov ar helloworld2
mov text2 ar
call printstr

call newline

mov ar name1
mov text1 ar
mov ar name2
mov text2 ar
call printstr

call newline

mov ar @j
call printchar
mov ar @a
call printchar
halt


# NEWLINE function
# Moves cursor to beginning of next line
loc newline
clc
mov ar cursor1
not ar
mov br 1F
and br
mov br cursor1
add br
add 1
io ar
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret


# PRINTCHAR function
# Prints a single character to the string passed in A reg
loc printchar
clc
mov br 0
stz cursor1

mov ar cursor1
inc ar
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret


# PRINTSTR function
# Prints the string at text1 and text2 to the screen
loc printstr
clc
mov br 0

loc startprint
ldz text1
add 0
jz endprint
stz cursor1
inc br
jmp startprint

loc endprint
mov ar cursor1
add br
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret