# Text to code converter
def @a 1
def @b 2
def @c 3
def @d 4
def @e 5
def @f 6
def @g 7
def @h 8
def @i 9
def @j A
def @k B
def @l C
def @m D
def @n E
def @o F
def @p 10
def @q 11
def @r 12
def @s 13
def @t 14
def @u 15
def @v 16
def @w 17
def @x 18
def @y 19
def @z 1A
def @_ 20

# Location of next character to draw
def cursor1 $00
def cursor2 $01

set cursor1 00
set cursor2 20

# Location of next text to be drawn to the screen
def text1 $02
def text2 $03

str hw "hello world"
str name "grason"

mov ar hw1
mov text1 ar
mov ar hw2
mov text2 ar
call printstr

call newline

mov ar name1
mov text1 ar
mov ar name2
mov text2 ar
call printstr

call newline
call newline

mov ar @y
call printchar
mov ar @e
call printchar
halt


# NEWLINE function
# Moves cursor to beginning of next line
loc newline
clc
mov ar cursor1
not ar
mov br 1F
and br
mov br cursor1
add br
add 1
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret


# PRINTCHAR function
# Prints a single character to the string passed in A reg
loc printchar
clc
mov br 0
stz cursor1

mov ar cursor1
inc ar
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret


# PRINTSTR function
# Prints the string at text1 and text2 to the screen
# Final character of string must be 00
loc printstr
clc
mov br 0

loc startprint
ldz text1
add 0
jz endprint
stz cursor1
inc br
jmp startprint

loc endprint
mov ar cursor1
add br
mov cursor1 ar
mov ar cursor2
add 0
mov cursor2 ar
ret